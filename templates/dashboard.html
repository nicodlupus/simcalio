<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SimCalio ‚Äî Dashboard</title>
  <link rel="stylesheet" href="../static/css/dashboard.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
</head>
<body>

  <nav>
    <div class="nav-logo">SimCal<span>io</span></div>
    <div class="nav-right">
      <div class="date-pill">üìÖ <input type="date" id="date-picker" /></div>
      <button class="btn-nav" onclick="window.location.href='/chat'">‚Üê Chat</button>
      <button class="btn-nav" onclick="logout()" style="color:var(--muted)">Sign Out</button>
    </div>
  </nav>

  <div class="page">
    <div class="greeting">Good day, <span id="user-name">...</span></div>
    <p class="sub-greeting" id="date-label">Loading your nutrition data...</p>

    <!-- STAT CARDS -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-label">Calories</div>
        <div class="stat-val" id="s-cals">‚Äî</div>
        <div class="stat-sub" id="s-cals-sub">of ‚Äî goal</div>
        <div class="stat-progress"><div class="stat-fill" id="sf-cals" style="width:0%"></div></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Protein</div>
        <div class="stat-val" id="s-prot">‚Äî</div>
        <div class="stat-sub" id="s-prot-sub">of ‚Äî goal</div>
        <div class="stat-progress"><div class="stat-fill" id="sf-prot" style="width:0%"></div></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Carbs</div>
        <div class="stat-val" id="s-carbs">‚Äî</div>
        <div class="stat-sub" id="s-carbs-sub">of ‚Äî goal</div>
        <div class="stat-progress"><div class="stat-fill" id="sf-carbs" style="width:0%"></div></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Fat</div>
        <div class="stat-val" id="s-fat">‚Äî</div>
        <div class="stat-sub" id="s-fat-sub">of ‚Äî goal</div>
        <div class="stat-progress"><div class="stat-fill" id="sf-fat" style="width:0%"></div></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Water</div>
        <div class="stat-val" id="s-water">‚Äî</div>
        <div class="stat-sub" id="s-water-sub">of ‚Äî goal</div>
        <div class="stat-progress"><div class="stat-fill" id="sf-water" style="width:0%"></div></div>
      </div>
    </div>

    <!-- CHARTS -->
    <div class="grid-2">
      <div class="panel">
        <div class="panel-title">Macro Breakdown</div>
        <canvas id="chart-macros"></canvas>
      </div>
      <div class="panel">
        <div class="panel-title">Goal Progress</div>
        <canvas id="chart-goals"></canvas>
      </div>
    </div>

    <!-- MICROS + MEALS -->
    <div class="grid-2" style="margin-bottom:16px">
      <div class="panel">
        <div class="panel-title">Micronutrients</div>
        <div class="micro-grid" id="micro-grid"><div class="no-data">No data yet</div></div>
      </div>
      <div class="panel">
        <div class="panel-title">Today's Meals</div>
        <div id="meals-container"><div class="no-data">No meals logged yet</div></div>
      </div>
    </div>

    <!-- DAILY GOALS -->
    <div class="panel" style="max-width: 420px">
      <div class="panel-title">Daily Goals</div>
      <div class="goals-form">
        <div class="goal-row">
          <span class="goal-label">Calories</span>
          <input class="goal-input" type="number" id="g-cals" min="0" value="2000" />
          <span class="goal-unit">kcal</span>
        </div>
        <div class="goal-row">
          <span class="goal-label">Protein</span>
          <input class="goal-input" type="number" id="g-prot" min="0" value="150" />
          <span class="goal-unit">g</span>
        </div>
        <div class="goal-row">
          <span class="goal-label">Carbs</span>
          <input class="goal-input" type="number" id="g-carbs" min="0" value="250" />
          <span class="goal-unit">g</span>
        </div>
        <div class="goal-row">
          <span class="goal-label">Fat</span>
          <input class="goal-input" type="number" id="g-fat" min="0" value="65" />
          <span class="goal-unit">g</span>
        </div>
        <div class="goal-row">
          <span class="goal-label">Water</span>
          <input class="goal-input" type="number" id="g-water" min="0" value="2000" />
          <span class="goal-unit">ml</span>
        </div>
        <button class="btn-save" id="btn-save-goals" onclick="saveGoals()">Save Goals</button>
      </div>
    </div>
  </div>

  <!-- JS loaded as module (required for Firebase ESM imports) -->
  <script type="module" src="../static/js/dashboard.js"></script>

</body>
</html>
